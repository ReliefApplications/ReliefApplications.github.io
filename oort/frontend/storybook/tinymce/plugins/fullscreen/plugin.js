!function(){"use strict";var Cell=function(initial){var value=initial;return{get:function(){return value},set:function(v){value=v}}},global$3=tinymce.util.Tools.resolve("tinymce.PluginManager"),get$5=function(fullscreenState){return{isFullscreen:function(){return null!==fullscreenState.get()}}},isType$1=function(type){return function(value){return t=typeof(x=value),(null===x?"null":"object"===t&&(Array.prototype.isPrototypeOf(x)||x.constructor&&"Array"===x.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(x)||x.constructor&&"String"===x.constructor.name)?"string":t)===type;var x,t}},isSimpleType=function(type){return function(value){return typeof value===type}},isString=isType$1("string"),isArray=isType$1("array"),isBoolean=isSimpleType("boolean"),isNonNullable=function(a){return!function(a){return null==a}(a)},isFunction=isSimpleType("function"),isNumber=isSimpleType("number"),noop=function(){},constant=function(value){return function(){return value}},identity=function(x){return x};function curry(fn){for(var initialArgs=[],_i=1;_i<arguments.length;_i++)initialArgs[_i-1]=arguments[_i];return function(){for(var restArgs=[],_i=0;_i<arguments.length;_i++)restArgs[_i]=arguments[_i];var all=initialArgs.concat(restArgs);return fn.apply(null,all)}}var call,id,never=constant(!1),always=constant(!0),none=function(){return NONE},NONE={fold:function(n,_s){return n()},isSome:never,isNone:always,getOr:id=identity,getOrThunk:call=function(thunk){return thunk()},getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:function(){return none()},toArray:function(){return[]},toString:constant("none()")},some=function(a){var constant_a=constant(a),self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},each:function(f){f(a)},bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Optional={some,none,from:function(value){return null==value?NONE:some(value)}},__assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},singleton=function(doRevoke){var subject=Cell(Optional.none()),revoke=function(){return subject.get().each(doRevoke)};return{clear:function(){revoke(),subject.set(Optional.none())},isSet:function(){return subject.get().isSome()},get:function(){return subject.get()},set:function(s){revoke(),subject.set(Optional.some(s))}}},unbindable=function(){return singleton((function(s){return s.unbind()}))},nativePush=Array.prototype.push,map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i)}return r},each$1=function(xs,f){for(var i=0,len=xs.length;i<len;i++){f(xs[i],i)}},filter$1=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i)&&r.push(x)}return r},find$1=function(xs,pred){return function(xs,pred,until){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i))return Optional.some(x);if(until(x,i))break}return Optional.none()}(xs,pred,never)},bind$3=function(xs,f){return function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!isArray(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);nativePush.apply(r,xs[i])}return r}(map(xs,f))},head=function(xs){return function(xs,i){return i>=0&&i<xs.length?Optional.some(xs[i]):Optional.none()}(xs,0)},keys=Object.keys,contains=function(str,substr){return-1!==str.indexOf(substr)},isSupported$1=function(dom){return void 0!==dom.style&&isFunction(dom.style.getPropertyValue)},fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:node}},SugarElement={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom,fromPoint:function(docElm,x,y){return Optional.from(docElm.dom.elementFromPoint(x,y)).map(fromDom)}};"undefined"!=typeof window?window:Function("return this;")();var isType=function(t){return function(element){return function(element){return element.dom.nodeType}(element)===t}},isElement=isType(1),isText=isType(3),isDocument=isType(9),isDocumentFragment=isType(11),unknown$2=function(){return nu$2(0,0)},nu$2=function(major,minor){return{major,minor}},Version={nu:nu$2,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown$2():function(regexes,agent){var r=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}}(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu$2(group(1),group(2))}(versionRegexes,cleanedAgent)},unknown:unknown$2},detectBrowser$1=function(browsers,userAgentData){return function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Optional.none()}(userAgentData.brands,(function(uaBrand){var lcBrand=uaBrand.brand.toLowerCase();return find$1(browsers,(function(browser){var _a;return lcBrand===(null===(_a=browser.brand)||void 0===_a?void 0:_a.toLowerCase())})).map((function(info){return{current:info.name,version:Version.nu(parseInt(uaBrand.version,10),0)}}))}))},detect$2=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return find$1(candidates,(function(candidate){return candidate.search(agent)}))},normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return contains(uastring,"edge/")&&contains(uastring,"chrome")&&contains(uastring,"safari")&&contains(uastring,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return contains(uastring,"chrome")&&!contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return contains(uastring,"msie")||contains(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return(contains(uastring,"safari")||contains(uastring,"mobile/"))&&contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return contains(uastring,"iphone")||contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],PlatformInfo={browsers:constant(browsers),oses:constant(oses)},nu$1=function(info){var current=info.current,version=info.version,isBrowser=function(name){return function(){return current===name}};return{current,version,isEdge:isBrowser("Edge"),isChrome:isBrowser("Chrome"),isIE:isBrowser("IE"),isOpera:isBrowser("Opera"),isFirefox:isBrowser("Firefox"),isSafari:isBrowser("Safari")}},Browser={unknown:function(){return nu$1({current:void 0,version:Version.unknown()})},nu:nu$1,edge:constant("Edge"),chrome:constant("Chrome"),ie:constant("IE"),opera:constant("Opera"),firefox:constant("Firefox"),safari:constant("Safari")},nu=function(info){var current=info.current,version=info.version,isOS=function(name){return function(){return current===name}};return{current,version,isWindows:isOS("Windows"),isiOS:isOS("iOS"),isAndroid:isOS("Android"),isOSX:isOS("OSX"),isLinux:isOS("Linux"),isSolaris:isOS("Solaris"),isFreeBSD:isOS("FreeBSD"),isChromeOS:isOS("ChromeOS")}},OperatingSystem={unknown:function(){return nu({current:void 0,version:Version.unknown()})},nu,windows:constant("Windows"),ios:constant("iOS"),android:constant("Android"),linux:constant("Linux"),osx:constant("OSX"),solaris:constant("Solaris"),freebsd:constant("FreeBSD"),chromeos:constant("ChromeOS")},PlatformDetection_detect=function(userAgent,userAgentDataOpt,mediaMatch){var browsers=PlatformInfo.browsers(),oses=PlatformInfo.oses(),browser=userAgentDataOpt.bind((function(userAgentData){return detectBrowser$1(browsers,userAgentData)})).orThunk((function(){return function(browsers,userAgent){return detect$2(browsers,userAgent).map((function(browser){var version=Version.detect(browser.versionRegexes,userAgent);return{current:browser.name,version}}))}(browsers,userAgent)})).fold(Browser.unknown,Browser.nu),os=function(oses,userAgent){return detect$2(oses,userAgent).map((function(os){var version=Version.detect(os.versionRegexes,userAgent);return{current:os.name,version}}))}(oses,userAgent).fold(OperatingSystem.unknown,OperatingSystem.nu),deviceType=function(os,browser,userAgent,mediaMatch){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isMobile=os.isiOS()||os.isAndroid(),isTouch=isMobile||mediaMatch("(pointer:coarse)"),isTablet=isiPad||!isiPhone&&isMobile&&mediaMatch("(min-device-width:768px)"),isPhone=isiPhone||isMobile&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent),isDesktop=!isPhone&&!isTablet&&!iOSwebview;return{isiPad:constant(isiPad),isiPhone:constant(isiPhone),isTablet:constant(isTablet),isPhone:constant(isPhone),isTouch:constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:constant(iOSwebview),isDesktop:constant(isDesktop)}}(os,browser,userAgent,mediaMatch);return{browser,os,deviceType}},mediaMatch=function(query){return window.matchMedia(query).matches},platform=function(f){var r,called=!1;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return called||(called=!0,r=f.apply(null,args)),r}}((function(){return PlatformDetection_detect(navigator.userAgent,Optional.from(navigator.userAgentData),mediaMatch)})),is=function(element,selector){var dom=element.dom;if(1!==dom.nodeType)return!1;var elem=dom;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},owner=function(element){return SugarElement.fromDom(element.dom.ownerDocument)},siblings$2=function(element){return function(element){return Optional.from(element.dom.parentNode).map(SugarElement.fromDom)}(element).map(children).map((function(elements){return filter$1(elements,(function(x){return e2=x,!(element.dom===e2.dom);var e2}))})).getOr([])},children=function(element){return map(element.dom.childNodes,SugarElement.fromDom)},supported=isFunction(Element.prototype.attachShadow)&&isFunction(Node.prototype.getRootNode),isSupported=constant(supported),getRootNode=supported?function(e){return SugarElement.fromDom(e.dom.getRootNode())}:function(dos){return isDocument(dos)?dos:owner(dos)},getShadowRoot=function(e){var dos,r=getRootNode(e);return isDocumentFragment(dos=r)&&isNonNullable(dos.dom.host)?Optional.some(r):Optional.none()},getShadowHost=function(e){return SugarElement.fromDom(e.dom.host)},isOpenShadowHost=function(element){return isNonNullable(element.dom.shadowRoot)},inBody=function(element){var dom=isText(element)?element.dom.parentNode:element.dom;if(null==dom||null===dom.ownerDocument)return!1;var fbc,fab,doc=dom.ownerDocument;return getShadowRoot(SugarElement.fromDom(dom)).fold((function(){return doc.body.contains(dom)}),(fbc=inBody,fab=getShadowHost,function(a){return fbc(fab(a))}))},set=function(element,key,value){!function(dom,key,value){if(!(isString(value)||isBoolean(value)||isNumber(value)))throw console.error("Invalid call to Attribute.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")}(element.dom,key,value)},get$3=function(element,key){var v=element.dom.getAttribute(key);return null===v?void 0:v},remove=function(element,key){element.dom.removeAttribute(key)},setAll=function(element,css){var dom=element.dom;!function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i)}}(css,(function(v,k){!function(dom,property,value){if(!isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);isSupported$1(dom)&&dom.style.setProperty(property,value)}(dom,k,v)}))},getUnsafeProperty=function(dom,property){return isSupported$1(dom)?dom.style.getPropertyValue(property):""},fromRawEvent=function(rawEvent){var fa,fb,target=SugarElement.fromDom(function(event){if(isSupported()&&isNonNullable(event.target)){var el=SugarElement.fromDom(event.target);if(isElement(el)&&isOpenShadowHost(el)&&event.composed&&event.composedPath){var composedPath=event.composedPath();if(composedPath)return head(composedPath)}}return Optional.from(event.target)}(rawEvent).getOr(rawEvent.target)),stop=function(){return rawEvent.stopPropagation()},prevent=function(){return rawEvent.preventDefault()},kill=(fa=prevent,fb=stop,function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fa(fb.apply(null,args))});return function(target,x,y,stop,prevent,kill,raw){return{target,x,y,stop,prevent,kill,raw}}(target,rawEvent.clientX,rawEvent.clientY,stop,prevent,kill,rawEvent)},binder=function(element,event,filter,handler,useCapture){var wrapped=function(filter,handler){return function(rawEvent){filter(rawEvent)&&handler(fromRawEvent(rawEvent))}}(filter,handler);return element.dom.addEventListener(event,wrapped,useCapture),{unbind:curry(unbind,element,event,wrapped,useCapture)}},unbind=function(element,event,handler,useCapture){element.dom.removeEventListener(event,handler,useCapture)},filter=always,bind$1=function(element,event,handler){return function(element,event,filter,handler){return binder(element,event,filter,handler,!1)}(element,event,filter,handler)},r=function(left,top){return{left,top,translate:function(x,y){return r(left+x,top+y)}}},SugarPosition=r,get=function(_win){var win=void 0===_win?window:_win;return platform().browser.isFirefox()?Optional.none():Optional.from(win.visualViewport)},bounds=function(x,y,width,height){return{x,y,width,height,right:x+width,bottom:y+height}},getBounds=function(_win){var win=void 0===_win?window:_win,doc=win.document,scroll=function(_DOC){var doc=void 0!==_DOC?_DOC.dom:document,x=doc.body.scrollLeft||doc.documentElement.scrollLeft,y=doc.body.scrollTop||doc.documentElement.scrollTop;return SugarPosition(x,y)}(SugarElement.fromDom(doc));return get(win).fold((function(){var html=win.document.documentElement,width=html.clientWidth,height=html.clientHeight;return bounds(scroll.left,scroll.top,width,height)}),(function(visualViewport){return bounds(Math.max(visualViewport.pageLeft,scroll.left),Math.max(visualViewport.pageTop,scroll.top),visualViewport.width,visualViewport.height)}))},bind=function(name,callback,_win){return get(_win).map((function(visualViewport){var handler=function(e){return callback(fromRawEvent(e))};return visualViewport.addEventListener(name,handler),{unbind:function(){return visualViewport.removeEventListener(name,handler)}}})).getOrThunk((function(){return{unbind:noop}}))},global$2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),global=tinymce.util.Tools.resolve("tinymce.util.Delay"),fireFullscreenStateChanged=function(editor,state){editor.fire("FullscreenStateChanged",{state})},getFullscreenNative=function(editor){return editor.getParam("fullscreen_native",!1,"boolean")},getFullscreenRoot=function(editor){var elem=SugarElement.fromDom(editor.getElement());return getShadowRoot(elem).map(getShadowHost).getOrThunk((function(){return function(doc){var b=doc.dom.body;if(null==b)throw new Error("Body is not available yet");return SugarElement.fromDom(b)}(owner(elem))}))},isFullscreenElement=function(elem){return elem.dom===(void 0!==(root=owner(elem).dom).fullscreenElement?root.fullscreenElement:void 0!==root.msFullscreenElement?root.msFullscreenElement:void 0!==root.webkitFullscreenElement?root.webkitFullscreenElement:null);var root},ancestors$1=function(scope,predicate,isRoot){return filter$1(function(element,isRoot){for(var stop=isFunction(isRoot)?isRoot:never,dom=element.dom,ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,p=SugarElement.fromDom(rawParent);if(ret.push(p),!0===stop(p))break;dom=rawParent}return ret}(scope,isRoot),predicate)},all=function(selector){return function(selector,scope){var dom,base=void 0===scope?document:scope.dom;return 1!==(dom=base).nodeType&&9!==dom.nodeType&&11!==dom.nodeType||0===dom.childElementCount?[]:map(base.querySelectorAll(selector),SugarElement.fromDom)}(selector)},ancestors=function(scope,selector,isRoot){return ancestors$1(scope,(function(e){return is(e,selector)}),isRoot)},siblings=function(scope,selector){return function(scope,predicate){return filter$1(siblings$2(scope),predicate)}(scope,(function(e){return is(e,selector)}))},attr="data-ephox-mobile-fullscreen-style",ancestorStyles="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",isAndroid=global$1.os.isAndroid(),matchColor=function(editorBody){var color=function(element,property){var dom=element.dom,r=window.getComputedStyle(dom).getPropertyValue(property);return""!==r||inBody(element)?r:getUnsafeProperty(dom,property)}(editorBody,"background-color");return void 0!==color&&""!==color?"background-color:"+color+"!important":"background-color:rgb(255,255,255)!important;"},DOM=global$2.DOM,viewportUpdate=get().fold((function(){return{bind:noop,unbind:noop}}),(function(visualViewport){var subject,editorContainer=(subject=singleton(noop),__assign(__assign({},subject),{on:function(f){return subject.get().each(f)}})),resizeBinder=unbindable(),scrollBinder=unbindable(),update=global.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){editorContainer.on((function(container){return setAll(container,{top:visualViewport.offsetTop+"px",left:visualViewport.offsetLeft+"px",height:visualViewport.height+"px",width:visualViewport.width+"px"})}))}))}),50);return{bind:function(element){editorContainer.set(element),update(),resizeBinder.set(bind("resize",update)),scrollBinder.set(bind("scroll",update))},unbind:function(){editorContainer.on((function(){resizeBinder.clear(),scrollBinder.clear()})),editorContainer.clear()}}})),toggleFullscreen=function(editor,fullscreenState){var pos,sugarDoc,doc,elem,body=document.body,documentElement=document.documentElement,editorContainer=editor.getContainer(),editorContainerS=SugarElement.fromDom(editorContainer),fullscreenRoot=getFullscreenRoot(editor),fullscreenInfo=fullscreenState.get(),editorBody=SugarElement.fromDom(editor.getBody()),isTouch=global$1.deviceType.isTouch(),editorContainerStyle=editorContainer.style,iframeStyle=editor.iframeElement.style,handleClasses=function(handler){handler(body,"tox-fullscreen"),handler(documentElement,"tox-fullscreen"),handler(editorContainer,"tox-fullscreen"),getShadowRoot(editorContainerS).map((function(root){return getShadowHost(root).dom})).each((function(host){handler(host,"tox-fullscreen"),handler(host,"tox-shadowhost")}))},cleanup=function(){var dom,clobberedEls;isTouch&&(dom=editor.dom,clobberedEls=all("["+attr+"]"),each$1(clobberedEls,(function(element){var restore=get$3(element,attr);"no-styles"!==restore?setAll(element,dom.parseStyle(restore)):remove(element,"style"),remove(element,attr)}))),handleClasses(DOM.removeClass),viewportUpdate.unbind(),Optional.from(fullscreenState.get()).each((function(info){return info.fullscreenChangeHandler.unbind()}))};if(fullscreenInfo)fullscreenInfo.fullscreenChangeHandler.unbind(),getFullscreenNative(editor)&&isFullscreenElement(fullscreenRoot)&&(sugarDoc=owner(fullscreenRoot),(doc=sugarDoc.dom).exitFullscreen?doc.exitFullscreen():doc.msExitFullscreen?doc.msExitFullscreen():doc.webkitCancelFullScreen&&doc.webkitCancelFullScreen()),iframeStyle.width=fullscreenInfo.iframeWidth,iframeStyle.height=fullscreenInfo.iframeHeight,editorContainerStyle.width=fullscreenInfo.containerWidth,editorContainerStyle.height=fullscreenInfo.containerHeight,editorContainerStyle.top=fullscreenInfo.containerTop,editorContainerStyle.left=fullscreenInfo.containerLeft,cleanup(),pos=fullscreenInfo.scrollPos,window.scrollTo(pos.x,pos.y),fullscreenState.set(null),fireFullscreenStateChanged(editor,!1),editor.off("remove",cleanup);else{var fullscreenChangeHandler=bind$1(owner(fullscreenRoot),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(_evt){getFullscreenNative(editor)&&(isFullscreenElement(fullscreenRoot)||null===fullscreenState.get()||toggleFullscreen(editor,fullscreenState))})),newFullScreenInfo={scrollPos:getBounds(window),containerWidth:editorContainerStyle.width,containerHeight:editorContainerStyle.height,containerTop:editorContainerStyle.top,containerLeft:editorContainerStyle.left,iframeWidth:iframeStyle.width,iframeHeight:iframeStyle.height,fullscreenChangeHandler};isTouch&&function(dom,container,editorBody){var clobber=function(clobberStyle){return function(element){var styles=get$3(element,"style"),backup=void 0===styles?"no-styles":styles.trim();backup!==clobberStyle&&(set(element,attr,backup),setAll(element,dom.parseStyle(clobberStyle)))}},ancestors$1=ancestors(container,"*"),siblings$1=bind$3(ancestors$1,(function(element){return siblings(element,"*:not(.tox-silver-sink)")})),bgColor=matchColor(editorBody);each$1(siblings$1,clobber("display:none!important;")),each$1(ancestors$1,clobber("position:absolute!important;"+ancestorStyles+bgColor)),clobber((!0===isAndroid?"":"position:absolute!important;")+ancestorStyles+bgColor)(container)}(editor.dom,editorContainerS,editorBody),iframeStyle.width=iframeStyle.height="100%",editorContainerStyle.width=editorContainerStyle.height="",handleClasses(DOM.addClass),viewportUpdate.bind(editorContainerS),editor.on("remove",cleanup),fullscreenState.set(newFullScreenInfo),getFullscreenNative(editor)&&((elem=fullscreenRoot.dom).requestFullscreen?elem.requestFullscreen():elem.msRequestFullscreen?elem.msRequestFullscreen():elem.webkitRequestFullScreen&&elem.webkitRequestFullScreen()),fireFullscreenStateChanged(editor,!0)}},makeSetupHandler=function(editor,fullscreenState){return function(api){api.setActive(null!==fullscreenState.get());var editorEventCallback=function(e){return api.setActive(e.state)};return editor.on("FullscreenStateChanged",editorEventCallback),function(){return editor.off("FullscreenStateChanged",editorEventCallback)}}};!function Plugin(){global$3.add("fullscreen",(function(editor){var fullscreenState=Cell(null);return editor.inline||(function(editor,fullscreenState){editor.addCommand("mceFullScreen",(function(){toggleFullscreen(editor,fullscreenState)}))}(editor,fullscreenState),function(editor,fullscreenState){var onAction=function(){return editor.execCommand("mceFullScreen")};editor.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction,onSetup:makeSetupHandler(editor,fullscreenState)}),editor.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction,onSetup:makeSetupHandler(editor,fullscreenState)})}(editor,fullscreenState),editor.addShortcut("Meta+Shift+F","","mceFullScreen")),get$5(fullscreenState)}))}()}();