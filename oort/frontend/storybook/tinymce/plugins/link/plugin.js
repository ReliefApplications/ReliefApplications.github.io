!function(){"use strict";var t,call,id,global$7=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$6=tinymce.util.Tools.resolve("tinymce.util.VK"),isType=function(type){return function(value){return t=typeof(x=value),(null===x?"null":"object"===t&&(Array.prototype.isPrototypeOf(x)||x.constructor&&"Array"===x.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(x)||x.constructor&&"String"===x.constructor.name)?"string":t)===type;var x,t}},isSimpleType=function(type){return function(value){return typeof value===type}},isString=isType("string"),isArray=isType("array"),isNull=(t=null,function(a){return t===a}),isBoolean=isSimpleType("boolean"),isFunction=isSimpleType("function"),noop=function(){},constant=function(value){return function(){return value}},identity=function(x){return x},tripleEquals=function(a,b){return a===b},never=constant(!1),always=constant(!0),none=function(){return NONE},NONE={fold:function(n,_s){return n()},isSome:never,isNone:always,getOr:id=identity,getOrThunk:call=function(thunk){return thunk()},getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:function(){return none()},toArray:function(){return[]},toString:constant("none()")},some=function(a){var constant_a=constant(a),self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},each:function(f){f(a)},bind:bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Optional={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},nativeIndexOf=Array.prototype.indexOf,nativePush=Array.prototype.push,contains=function(xs,x){return function(ts,t){return nativeIndexOf.call(ts,t)}(xs,x)>-1},flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!isArray(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);nativePush.apply(r,xs[i])}return r},bind=function(xs,f){return flatten(function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i)}return r}(xs,f))},findMap=function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Optional.none()},is=function(lhs,rhs,comparator){return void 0===comparator&&(comparator=tripleEquals),lhs.exists((function(left){return comparator(left,rhs)}))},cat=function(arr){for(var r=[],push=function(x){r.push(x)},i=0;i<arr.length;i++)arr[i].each(push);return r},someIf=function(b,a){return b?Optional.some(a):Optional.none()},assumeExternalTargets=function(editor){var externalTargets=editor.getParam("link_assume_external_targets",!1);return isBoolean(externalTargets)&&externalTargets?1:!isString(externalTargets)||"http"!==externalTargets&&"https"!==externalTargets?0:externalTargets},getDefaultLinkTarget=function(editor){return editor.getParam("default_link_target")},getTargetList=function(editor){return editor.getParam("target_list",!0)},getRelList=function(editor){return editor.getParam("rel_list",[],"array")},shouldShowLinkTitle=function(editor){return editor.getParam("link_title",!0,"boolean")},allowUnsafeLinkTarget=function(editor){return editor.getParam("allow_unsafe_link_target",!1,"boolean")},getDefaultLinkProtocol=function(editor){return editor.getParam("link_default_protocol","http","string")},global$5=tinymce.util.Tools.resolve("tinymce.util.Tools"),getValue=function(item){return isString(item.value)?item.value:""},sanitizeList=function(list,extractValue){var out=[];return global$5.each(list,(function(item){var text=function(item){return isString(item.text)?item.text:isString(item.title)?item.title:""}(item);if(void 0!==item.menu){var items=sanitizeList(item.menu,extractValue);out.push({text:text,items:items})}else{var value=extractValue(item);out.push({text:text,value:value})}})),out},sanitizeWith=function(extracter){return void 0===extracter&&(extracter=getValue),function(list){return Optional.from(list).map((function(list){return sanitizeList(list,extracter)}))}},ListOptions={sanitize:function(list){return sanitizeWith(getValue)(list)},sanitizeWith:sanitizeWith,createUi:function(name,label){return function(items){return{name:name,type:"listbox",label:label,items:items}}},getValue:getValue},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},keys=Object.keys,hasOwnProperty=Object.hasOwnProperty,internalFilter=function(obj,pred,onTrue,onFalse){return function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i)}}(obj,(function(x,i){(pred(x,i)?onTrue:onFalse)(x,i)})),{}},has=function(obj,key){return hasOwnProperty.call(obj,key)},global$4=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),global$3=tinymce.util.Tools.resolve("tinymce.util.URI"),isAnchor=function(elm){return elm&&"a"===elm.nodeName.toLowerCase()},isLink=function(elm){return isAnchor(elm)&&!!getHref(elm)},collectNodesInRange=function(rng,predicate){if(rng.collapsed)return[];var contents=rng.cloneContents(),walker=new global$4(contents.firstChild,contents),elements=[],current=contents.firstChild;do{predicate(current)&&elements.push(current)}while(current=walker.next());return elements},hasProtocol=function(url){return/^\w+:/i.test(url)},getHref=function(elm){var href=elm.getAttribute("data-mce-href");return href||elm.getAttribute("href")},applyRelTargetRules=function(rel,isUnsafe){var rules=["noopener"],rels=rel?rel.split(/\s+/):[],removeTargetRules=function(rels){return rels.filter((function(val){return-1===global$5.inArray(rules,val)}))},newRels=isUnsafe?function(rels){return(rels=removeTargetRules(rels)).length>0?rels.concat(rules):rules}(rels):removeTargetRules(rels);return newRels.length>0?function(rels){return global$5.trim(rels.sort().join(" "))}(newRels):""},getAnchorElement=function(editor,selectedElm){return selectedElm=selectedElm||editor.selection.getNode(),isImageFigure(selectedElm)?editor.dom.select("a[href]",selectedElm)[0]:editor.dom.getParent(selectedElm,"a[href]")},getAnchorText=function(selection,anchorElm){return function(text){return text.replace(/\uFEFF/g,"")}(anchorElm?anchorElm.innerText||anchorElm.textContent:selection.getContent({format:"text"}))},hasLinks=function(elements){return global$5.grep(elements,isLink).length>0},isOnlyTextSelected=function(editor){var inlineTextElements=editor.schema.getTextInlineElements();return 0===collectNodesInRange(editor.selection.getRng(),(function(elm){return 1===elm.nodeType&&!isAnchor(elm)&&!has(inlineTextElements,elm.nodeName.toLowerCase())})).length},isImageFigure=function(elm){return elm&&"FIGURE"===elm.nodeName&&/\bimage\b/i.test(elm.className)},applyLinkOverrides=function(editor,linkAttrs){var newLinkAttrs=__assign({},linkAttrs);if(!(getRelList(editor).length>0)&&!1===allowUnsafeLinkTarget(editor)){var newRel=applyRelTargetRules(newLinkAttrs.rel,"_blank"===newLinkAttrs.target);newLinkAttrs.rel=newRel||null}return Optional.from(newLinkAttrs.target).isNone()&&!1===getTargetList(editor)&&(newLinkAttrs.target=getDefaultLinkTarget(editor)),newLinkAttrs.href=function(href,assumeExternalTargets){return"http"!==assumeExternalTargets&&"https"!==assumeExternalTargets||hasProtocol(href)?href:assumeExternalTargets+"://"+href}(newLinkAttrs.href,assumeExternalTargets(editor)),newLinkAttrs},linkDomMutation=function(editor,attachState,data){var selectedElm=editor.selection.getNode(),anchorElm=getAnchorElement(editor,selectedElm),linkAttrs=applyLinkOverrides(editor,function(data){var xs,f,acc;return xs=["title","rel","class","target"],f=function(acc,key){return data[key].each((function(value){acc[key]=value.length>0?value:null})),acc},acc={href:data.href},function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i)}(xs,(function(x,i){acc=f(acc,x,i)})),acc}(data));editor.undoManager.transact((function(){data.href===attachState.href&&attachState.attach(),anchorElm?(editor.focus(),function(editor,anchorElm,text,linkAttrs){text.each((function(text){has(anchorElm,"innerText")?anchorElm.innerText=text:anchorElm.textContent=text})),editor.dom.setAttribs(anchorElm,linkAttrs),editor.selection.select(anchorElm)}(editor,anchorElm,data.text,linkAttrs)):function(editor,selectedElm,text,linkAttrs){isImageFigure(selectedElm)?linkImageFigure(editor,selectedElm,linkAttrs):text.fold((function(){editor.execCommand("mceInsertLink",!1,linkAttrs)}),(function(text){editor.insertContent(editor.dom.createHTML("a",linkAttrs,editor.dom.encode(text)))}))}(editor,selectedElm,data.text,linkAttrs)}))},unwrapOptions=function(data){var cls=data.class,href=data.href,rel=data.rel,target=data.target,text=data.text,title=data.title;return function(obj,pred){var r,t={};return internalFilter(obj,pred,(r=t,function(x,i){r[i]=x}),noop),t}({class:cls.getOrNull(),href:href,rel:rel.getOrNull(),target:target.getOrNull(),text:text.getOrNull(),title:title.getOrNull()},(function(v,_k){return!1===isNull(v)}))},link=function(editor,attachState,data){var sanitizedData=function(editor,data){var href=data.href;return __assign(__assign({},data),{href:global$3.isDomSafe(href,"a",editor.settings)?href:""})}(editor,data);editor.hasPlugin("rtc",!0)?editor.execCommand("createlink",!1,unwrapOptions(sanitizedData)):linkDomMutation(editor,attachState,sanitizedData)},unlink=function(editor){editor.hasPlugin("rtc",!0)?editor.execCommand("unlink"):function(editor){editor.undoManager.transact((function(){var node=editor.selection.getNode();isImageFigure(node)?unlinkImageFigure(editor,node):function(editor){var dom=editor.dom,selection=editor.selection,bookmark=selection.getBookmark(),rng=selection.getRng().cloneRange(),startAnchorElm=dom.getParent(rng.startContainer,"a[href]",editor.getBody()),endAnchorElm=dom.getParent(rng.endContainer,"a[href]",editor.getBody());startAnchorElm&&rng.setStartBefore(startAnchorElm),endAnchorElm&&rng.setEndAfter(endAnchorElm),selection.setRng(rng),editor.execCommand("unlink"),selection.moveToBookmark(bookmark)}(editor),editor.focus()}))}(editor)},unlinkImageFigure=function(editor,fig){var img=editor.dom.select("img",fig)[0];if(img){var a=editor.dom.getParents(img,"a[href]",fig)[0];a&&(a.parentNode.insertBefore(img,a),editor.dom.remove(a))}},linkImageFigure=function(editor,fig,attrs){var img=editor.dom.select("img",fig)[0];if(img){var a=editor.dom.create("a",attrs);img.parentNode.insertBefore(a,img),a.appendChild(img)}},isListGroup=function(item){return has(obj=item,key="items")&&void 0!==obj[key]&&null!==obj[key];var obj,key},findTextByValue=function(value,catalog){return findMap(catalog,(function(item){return isListGroup(item)?findTextByValue(value,item.items):someIf(item.value===value,item)}))},getDelta=function(persistentText,fieldName,catalog,data){var value=data[fieldName],hasPersistentText=persistentText.length>0;return void 0!==value?findTextByValue(value,catalog).map((function(i){return{url:{value:i.value,meta:{text:hasPersistentText?persistentText:i.text,attach:noop}},text:hasPersistentText?persistentText:i.text}})):Optional.none()},DialogChanges_init=function(initialData,linkCatalog){var persistentData={text:initialData.text,title:initialData.title},onUrlChange=function(data){var url,text=(url=data.url,someIf(persistentData.text.length<=0,Optional.from(url.meta.text).getOr(url.value))),title=function(url){return someIf(persistentData.title.length<=0,Optional.from(url.meta.title).getOr(""))}(data.url);return text.isSome()||title.isSome()?Optional.some(__assign(__assign({},text.map((function(text){return{text:text}})).getOr({})),title.map((function(title){return{title:title}})).getOr({}))):Optional.none()},onCatalogChange=function(data,change){var catalogs,fieldName,catalog=(catalogs=linkCatalog,fieldName=change.name,"link"===fieldName?catalogs.link:"anchor"===fieldName?catalogs.anchor:Optional.none()).getOr([]);return getDelta(persistentData.text,change.name,catalog,data)};return{onChange:function(getData,change){var name=change.name;return"url"===name?onUrlChange(getData()):contains(["anchor","link"],name)?onCatalogChange(getData(),change):"text"===name||"title"===name?(persistentData[name]=getData()[name],Optional.none()):Optional.none()}}},global$2=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$1=tinymce.util.Tools.resolve("tinymce.util.Promise"),tryEmailTransform=function(data){var url=data.href;return url.indexOf("@")>0&&-1===url.indexOf("/")&&-1===url.indexOf("mailto:")?Optional.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(oldData){return __assign(__assign({},oldData),{href:"mailto:"+url})}}):Optional.none()},tryProtocolTransform=function(assumeExternalTargets,defaultLinkProtocol){return function(data){var url=data.href;return 1===assumeExternalTargets&&!hasProtocol(url)||0===assumeExternalTargets&&/^\s*www(\.|\d\.)/i.test(url)?Optional.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+defaultLinkProtocol+":// prefix?",preprocess:function(oldData){return __assign(__assign({},oldData),{href:defaultLinkProtocol+"://"+url})}}):Optional.none()}},DialogConfirms_preprocess=function(editor,data){return findMap([tryEmailTransform,tryProtocolTransform(assumeExternalTargets(editor),getDefaultLinkProtocol(editor))],(function(f){return f(data)})).fold((function(){return global$1.resolve(data)}),(function(transform){return new global$1((function(callback){!function(editor,message,callback){var rng=editor.selection.getRng();global$2.setEditorTimeout(editor,(function(){editor.windowManager.confirm(message,(function(state){editor.selection.setRng(rng),callback(state)}))}))}(editor,transform.message,(function(state){callback(state?transform.preprocess(data):data)}))}))}))},AnchorListOptions_getAnchors=function(editor){var anchorNodes=editor.dom.select("a:not([href])"),anchors=bind(anchorNodes,(function(anchor){var id=anchor.name||anchor.id;return id?[{text:id,value:"#"+id}]:[]}));return anchors.length>0?Optional.some([{text:"None",value:""}].concat(anchors)):Optional.none()},ClassListOptions_getClasses=function(editor){var list=function(editor){return editor.getParam("link_class_list",[],"array")}(editor);return list.length>0?ListOptions.sanitize(list):Optional.none()},global=tinymce.util.Tools.resolve("tinymce.util.XHR"),LinkListOptions_getLinks=function(editor){var extractor=function(item){return editor.convertURL(item.value||item.url,"href")},linkList=function(editor){return editor.getParam("link_list")}(editor);return new global$1((function(callback){isString(linkList)?global.send({url:linkList,success:function(text){return callback(function(text){try{return Optional.some(JSON.parse(text))}catch(err){return Optional.none()}}(text))},error:function(_){return callback(Optional.none())}}):isFunction(linkList)?linkList((function(output){return callback(Optional.some(output))})):callback(Optional.from(linkList))})).then((function(optItems){return optItems.bind(ListOptions.sanitizeWith(extractor)).map((function(items){if(items.length>0){return[{text:"None",value:""}].concat(items)}return items}))}))},RelOptions_getRels=function(editor,initialTarget){var list=getRelList(editor);if(list.length>0){var isTargetBlank_1=is(initialTarget,"_blank");return(!1===allowUnsafeLinkTarget(editor)?ListOptions.sanitizeWith((function(item){return applyRelTargetRules(ListOptions.getValue(item),isTargetBlank_1)})):ListOptions.sanitize)(list)}return Optional.none()},fallbacks=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],TargetOptions_getTargets=function(editor){var list=getTargetList(editor);return isArray(list)?ListOptions.sanitize(list).orThunk((function(){return Optional.some(fallbacks)})):!1===list?Optional.none():Optional.some(fallbacks)},nonEmptyAttr=function(dom,elem,name){var val=dom.getAttrib(elem,name);return null!==val&&val.length>0?Optional.some(val):Optional.none()},DialogInfo_collect=function(editor,linkNode){return LinkListOptions_getLinks(editor).then((function(links){var anchor=function(editor,anchor){var dom=editor.dom,text=isOnlyTextSelected(editor)?Optional.some(getAnchorText(editor.selection,anchor)):Optional.none(),url=anchor?Optional.some(dom.getAttrib(anchor,"href")):Optional.none(),target=anchor?Optional.from(dom.getAttrib(anchor,"target")):Optional.none(),rel=nonEmptyAttr(dom,anchor,"rel"),linkClass=nonEmptyAttr(dom,anchor,"class");return{url:url,text:text,title:nonEmptyAttr(dom,anchor,"title"),target:target,rel:rel,linkClass:linkClass}}(editor,linkNode);return{anchor:anchor,catalogs:{targets:TargetOptions_getTargets(editor),rels:RelOptions_getRels(editor,anchor.target),classes:ClassListOptions_getClasses(editor),anchor:AnchorListOptions_getAnchors(editor),link:links},optNode:Optional.from(linkNode),flags:{titleEnabled:shouldShowLinkTitle(editor)}}}))},open$1=function(editor){(function(editor){var anchorNode=getAnchorElement(editor);return DialogInfo_collect(editor,anchorNode)})(editor).then((function(info){return function(settings,onSubmit,editor){var displayText=settings.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),titleText=settings.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],initialData=function(info,defaultTarget){var anchor=info.anchor,url=anchor.url.getOr("");return{url:{value:url,meta:{original:{value:url}}},text:anchor.text.getOr(""),title:anchor.title.getOr(""),anchor:url,link:url,rel:anchor.rel.getOr(""),target:anchor.target.or(defaultTarget).getOr(""),linkClass:anchor.linkClass.getOr("")}}(settings,Optional.from(getDefaultLinkTarget(editor))),catalogs=settings.catalogs,dialogDelta=DialogChanges_init(initialData,catalogs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:flatten([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],displayText,titleText,cat([catalogs.anchor.map(ListOptions.createUi("anchor","Anchors")),catalogs.rels.map(ListOptions.createUi("rel","Rel")),catalogs.targets.map(ListOptions.createUi("target","Open link in...")),catalogs.link.map(ListOptions.createUi("link","Link list")),catalogs.classes.map(ListOptions.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:initialData,onChange:function(api,_a){var name=_a.name;dialogDelta.onChange(api.getData,{name:name}).each((function(newData){api.setData(newData)}))},onSubmit:onSubmit}}(info,function(editor,info){return function(api){var data=api.getData();if(!data.url.value)return unlink(editor),void api.close();var getChangedValue=function(key){return Optional.from(data[key]).filter((function(value){return!is(info.anchor[key],value)}))},changedData={href:data.url.value,text:getChangedValue("text"),target:getChangedValue("target"),rel:getChangedValue("rel"),class:getChangedValue("linkClass"),title:getChangedValue("title")},attachState={href:data.url.value,attach:void 0!==data.url.meta&&data.url.meta.attach?data.url.meta.attach:noop};DialogConfirms_preprocess(editor,changedData).then((function(pData){link(editor,attachState,pData)})),api.close()}}(editor,info),editor)})).then((function(spec){editor.windowManager.open(spec)}))},open=function(url){var link=document.createElement("a");link.target="_blank",link.href=url,link.rel="noreferrer noopener";var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(link,evt){document.body.appendChild(link),link.dispatchEvent(evt),document.body.removeChild(link)}(link,evt)},getLink=function(editor,elm){return editor.dom.getParent(elm,"a[href]")},getSelectedLink=function(editor){return getLink(editor,editor.selection.getStart())},gotoLink=function(editor,a){if(a){var href=getHref(a);if(/^#/.test(href)){var targetEl=editor.$(href);targetEl.length&&editor.selection.scrollIntoView(targetEl[0],!0)}else open(a.href)}},openDialog=function(editor){return function(){open$1(editor)}},gotoSelectedLink=function(editor){return function(){gotoLink(editor,getSelectedLink(editor))}},toggleState=function(editor,toggler){return editor.on("NodeChange",toggler),function(){return editor.off("NodeChange",toggler)}},toggleActiveState=function(editor){return function(api){var updateState=function(){return api.setActive(!editor.mode.isReadOnly()&&null!==getAnchorElement(editor,editor.selection.getNode()))};return updateState(),toggleState(editor,updateState)}},toggleEnabledState=function(editor){return function(api){var updateState=function(){return api.setDisabled(null===getAnchorElement(editor,editor.selection.getNode()))};return updateState(),toggleState(editor,updateState)}},toggleUnlinkState=function(editor){return function(api){var hasLinks$1=function(parents){return hasLinks(parents)||(rng=editor.selection.getRng(),collectNodesInRange(rng,isLink).length>0);var rng},parents=editor.dom.getParents(editor.selection.getStart());return api.setDisabled(!hasLinks$1(parents)),toggleState(editor,(function(e){return api.setDisabled(!hasLinks$1(e.parents))}))}},setupContextToolbars=function(editor){var onSetupLink=function(buttonApi){var node=editor.selection.getNode();return buttonApi.setDisabled(!getAnchorElement(editor,node)),noop};editor.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:toggleActiveState(editor)},label:"Link",predicate:function(node){return!!getAnchorElement(editor,node)&&function(editor){return editor.getParam("link_context_toolbar",!1,"boolean")}(editor)},initValue:function(){var elm=getAnchorElement(editor);return elm?getHref(elm):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(buttonApi){var node=editor.selection.getNode();return buttonApi.setActive(!!getAnchorElement(editor,node)),toggleActiveState(editor)(buttonApi)},onAction:function(formApi){var value=formApi.getValue(),text=function(value){var anchor=getAnchorElement(editor),onlyText=isOnlyTextSelected(editor);if(!anchor&&onlyText){var text=getAnchorText(editor.selection,anchor);return Optional.some(text.length>0?text:value)}return Optional.none()}(value);link(editor,{href:value,attach:noop},{href:value,text:text,title:Optional.none(),rel:Optional.none(),target:Optional.none(),class:Optional.none()}),function(editor){editor.selection.collapse(!1)}(editor),formApi.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:onSetupLink,onAction:function(formApi){unlink(editor),formApi.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:onSetupLink,onAction:function(formApi){gotoSelectedLink(editor)(),formApi.hide()}}]})};!function Plugin(){global$7.add("link",(function(editor){!function(editor){editor.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:openDialog(editor),onSetup:toggleActiveState(editor)}),editor.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:gotoSelectedLink(editor),onSetup:toggleEnabledState(editor)}),editor.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return unlink(editor)},onSetup:toggleUnlinkState(editor)})}(editor),function(editor){editor.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:gotoSelectedLink(editor),onSetup:toggleEnabledState(editor)}),editor.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:openDialog(editor)}),editor.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return unlink(editor)},onSetup:toggleUnlinkState(editor)})}(editor),function(editor){editor.ui.registry.addContextMenu("link",{update:function(element){return hasLinks(editor.dom.getParents(element,"a"))?"link unlink openlink":"link"}})}(editor),setupContextToolbars(editor),function(editor){editor.on("click",(function(e){var link=getLink(editor,e.target);link&&global$6.metaKeyPressed(e)&&(e.preventDefault(),gotoLink(editor,link))})),editor.on("keydown",(function(e){var link=getSelectedLink(editor);link&&13===e.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(e)&&(e.preventDefault(),gotoLink(editor,link))}))}(editor),function(editor){editor.addCommand("mceLink",(function(){!function(editor){return editor.getParam("link_quicklink",!1,"boolean")}(editor)?openDialog(editor)():editor.fire("contexttoolbar-show",{toolbarKey:"quicklink"})}))}(editor),function(editor){editor.addShortcut("Meta+K","",(function(){editor.execCommand("mceLink")}))}(editor)}))}()}();