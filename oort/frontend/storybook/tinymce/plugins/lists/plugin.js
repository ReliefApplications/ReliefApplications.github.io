!function(){"use strict";var call,id,global$7=tinymce.util.Tools.resolve("tinymce.PluginManager"),isType$1=function(type){return function(value){return t=typeof(x=value),(null===x?"null":"object"===t&&(Array.prototype.isPrototypeOf(x)||x.constructor&&"Array"===x.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(x)||x.constructor&&"String"===x.constructor.name)?"string":t)===type;var x,t}},isSimpleType=function(type){return function(value){return typeof value===type}},isString=isType$1("string"),isObject=isType$1("object"),isArray=isType$1("array"),isBoolean=isSimpleType("boolean"),isFunction=isSimpleType("function"),isNumber=isSimpleType("number"),noop=function(){},constant=function(value){return function(){return value}},identity=function(x){return x},tripleEquals=function(a,b){return a===b},not=function(f){return function(t){return!f(t)}},never=constant(!1),always=constant(!0),none=function(){return NONE},NONE={fold:function(n,_s){return n()},isSome:never,isNone:always,getOr:id=identity,getOrThunk:call=function(thunk){return thunk()},getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:function(){return none()},toArray:function(){return[]},toString:constant("none()")},some=function(a){var constant_a=constant(a),self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},each:function(f){f(a)},bind:bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Optional={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},nativeSlice=Array.prototype.slice,nativePush=Array.prototype.push,map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i)}return r},each$1=function(xs,f){for(var i=0,len=xs.length;i<len;i++){f(xs[i],i)}},filter$1=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i)&&r.push(x)}return r},foldl=function(xs,f,acc){return each$1(xs,(function(x,i){acc=f(acc,x,i)})),acc},findUntil=function(xs,pred,until){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i))return Optional.some(x);if(until(x,i))break}return Optional.none()},find$1=function(xs,pred){return findUntil(xs,pred,never)},bind=function(xs,f){return function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!isArray(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);nativePush.apply(r,xs[i])}return r}(map(xs,f))},reverse=function(xs){var r=nativeSlice.call(xs,0);return r.reverse(),r},get$1=function(xs,i){return i>=0&&i<xs.length?Optional.some(xs[i]):Optional.none()},head=function(xs){return get$1(xs,0)},last=function(xs){return get$1(xs,xs.length-1)},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};var r,unknown$2=function(){return nu$2(0,0)},nu$2=function(major,minor){return{major:major,minor:minor}},Version={nu:nu$2,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown$2():function(regexes,agent){var r=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}}(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu$2(group(1),group(2))}(versionRegexes,cleanedAgent)},unknown:unknown$2},detectBrowser$1=function(browsers,userAgentData){return function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Optional.none()}(userAgentData.brands,(function(uaBrand){var lcBrand=uaBrand.brand.toLowerCase();return find$1(browsers,(function(browser){var _a;return lcBrand===(null===(_a=browser.brand)||void 0===_a?void 0:_a.toLowerCase())})).map((function(info){return{current:info.name,version:Version.nu(parseInt(uaBrand.version,10),0)}}))}))},detect$2=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return find$1(candidates,(function(candidate){return candidate.search(agent)}))},contains$1=function(str,substr){return-1!==str.indexOf(substr)},trim=(r=/^\s+|\s+$/g,function(s){return s.replace(r,"")}),normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return contains$1(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return contains$1(uastring,"edge/")&&contains$1(uastring,"chrome")&&contains$1(uastring,"safari")&&contains$1(uastring,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return contains$1(uastring,"chrome")&&!contains$1(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return contains$1(uastring,"msie")||contains$1(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return(contains$1(uastring,"safari")||contains$1(uastring,"mobile/"))&&contains$1(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return contains$1(uastring,"iphone")||contains$1(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],PlatformInfo={browsers:constant(browsers),oses:constant(oses)},nu$1=function(info){var current=info.current,version=info.version,isBrowser=function(name){return function(){return current===name}};return{current:current,version:version,isEdge:isBrowser("Edge"),isChrome:isBrowser("Chrome"),isIE:isBrowser("IE"),isOpera:isBrowser("Opera"),isFirefox:isBrowser("Firefox"),isSafari:isBrowser("Safari")}},Browser={unknown:function(){return nu$1({current:void 0,version:Version.unknown()})},nu:nu$1,edge:constant("Edge"),chrome:constant("Chrome"),ie:constant("IE"),opera:constant("Opera"),firefox:constant("Firefox"),safari:constant("Safari")},nu=function(info){var current=info.current,version=info.version,isOS=function(name){return function(){return current===name}};return{current:current,version:version,isWindows:isOS("Windows"),isiOS:isOS("iOS"),isAndroid:isOS("Android"),isOSX:isOS("OSX"),isLinux:isOS("Linux"),isSolaris:isOS("Solaris"),isFreeBSD:isOS("FreeBSD"),isChromeOS:isOS("ChromeOS")}},OperatingSystem={unknown:function(){return nu({current:void 0,version:Version.unknown()})},nu:nu,windows:constant("Windows"),ios:constant("iOS"),android:constant("Android"),linux:constant("Linux"),osx:constant("OSX"),solaris:constant("Solaris"),freebsd:constant("FreeBSD"),chromeos:constant("ChromeOS")},PlatformDetection_detect=function(userAgent,userAgentDataOpt,mediaMatch){var browsers=PlatformInfo.browsers(),oses=PlatformInfo.oses(),browser=userAgentDataOpt.bind((function(userAgentData){return detectBrowser$1(browsers,userAgentData)})).orThunk((function(){return function(browsers,userAgent){return detect$2(browsers,userAgent).map((function(browser){var version=Version.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}}))}(browsers,userAgent)})).fold(Browser.unknown,Browser.nu),os=function(oses,userAgent){return detect$2(oses,userAgent).map((function(os){var version=Version.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}}))}(oses,userAgent).fold(OperatingSystem.unknown,OperatingSystem.nu),deviceType=function(os,browser,userAgent,mediaMatch){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isMobile=os.isiOS()||os.isAndroid(),isTouch=isMobile||mediaMatch("(pointer:coarse)"),isTablet=isiPad||!isiPhone&&isMobile&&mediaMatch("(min-device-width:768px)"),isPhone=isiPhone||isMobile&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent),isDesktop=!isPhone&&!isTablet&&!iOSwebview;return{isiPad:constant(isiPad),isiPhone:constant(isiPhone),isTablet:constant(isTablet),isPhone:constant(isPhone),isTouch:constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:constant(iOSwebview),isDesktop:constant(isDesktop)}}(os,browser,userAgent,mediaMatch);return{browser:browser,os:os,deviceType:deviceType}},mediaMatch=function(query){return window.matchMedia(query).matches},platform=function(f){var r,called=!1;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return called||(called=!0,r=f.apply(null,args)),r}}((function(){return PlatformDetection_detect(navigator.userAgent,Optional.from(navigator.userAgentData),mediaMatch)})),fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:node}},SugarElement={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(docElm,x,y){return Optional.from(docElm.dom.elementFromPoint(x,y)).map(fromDom)}},eq=function(e1,e2){return e1.dom===e2.dom},ieContains=function(e1,e2){return a=e1.dom,b=e2.dom,function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)}(a,b,Node.DOCUMENT_POSITION_CONTAINED_BY);var a,b},contains=function(e1,e2){return platform().browser.isIE()?ieContains(e1,e2):function(e1,e2){var d1=e1.dom,d2=e2.dom;return d1!==d2&&d1.contains(d2)}(e1,e2)},is$1=function(element,selector){var dom=element.dom;if(1!==dom.nodeType)return!1;var elem=dom;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},global$6=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),global$5=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),global$4=tinymce.util.Tools.resolve("tinymce.util.VK"),keys=Object.keys,each=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i)}},filter=function(obj,pred){var t={};return function(obj,pred,onTrue,onFalse){each(obj,(function(x,i){(pred(x,i)?onTrue:onFalse)(x,i)}))}(obj,pred,function(r){return function(x,i){r[i]=x}}(t),noop),t};"undefined"!=typeof window?window:Function("return this;")();var t,name=function(element){return element.dom.nodeName.toLowerCase()},isElement=(t=1,function(element){return function(element){return element.dom.nodeType}(element)===t}),isTag=function(tag){return function(e){return isElement(e)&&name(e)===tag}},setAll=function(element,attrs){var dom=element.dom;each(attrs,(function(v,k){!function(dom,key,value){if(!(isString(value)||isBoolean(value)||isNumber(value)))throw console.error("Invalid call to Attribute.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")}(dom,k,v)}))},clone$1=function(element){return foldl(element.dom.attributes,(function(acc,attr){return acc[attr.name]=attr.value,acc}),{})},parent=function(element){return Optional.from(element.dom.parentNode).map(SugarElement.fromDom)},children=function(element){return map(element.dom.childNodes,SugarElement.fromDom)},child=function(element,index){var cs=element.dom.childNodes;return Optional.from(cs[index]).map(SugarElement.fromDom)},firstChild=function(element){return child(element,0)},lastChild=function(element){return child(element,element.dom.childNodes.length-1)},before$1=function(marker,element){parent(marker).each((function(v){v.dom.insertBefore(element.dom,marker.dom)}))},append$1=function(parent,element){parent.dom.appendChild(element.dom)},append=function(parent,elements){each$1(elements,(function(x){append$1(parent,x)}))},remove=function(element){var dom=element.dom;null!==dom.parentNode&&dom.parentNode.removeChild(dom)},deep=function(original){return function(original,isDeep){return SugarElement.fromDom(original.dom.cloneNode(isDeep))}(original,!0)},mutate=function(original,tag){var nu=function(original,tag){var nu=SugarElement.fromTag(tag),attributes=clone$1(original);return setAll(nu,attributes),nu}(original,tag);before$1(original,nu);var children$1=children(original);return append(nu,children$1),remove(original),nu},global$3=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),matchNodeName=function(name){return function(node){return node&&node.nodeName.toLowerCase()===name}},matchNodeNames=function(regex){return function(node){return node&&regex.test(node.nodeName)}},isTextNode=function(node){return node&&3===node.nodeType},isListNode=matchNodeNames(/^(OL|UL|DL)$/),isOlUlNode=matchNodeNames(/^(OL|UL)$/),isOlNode=matchNodeName("ol"),isListItemNode=matchNodeNames(/^(LI|DT|DD)$/),isDlItemNode=matchNodeNames(/^(DT|DD)$/),isTableCellNode=matchNodeNames(/^(TH|TD)$/),isBr=matchNodeName("br"),isTextBlock=function(editor,node){return node&&!!editor.schema.getTextBlockElements()[node.nodeName]},isBlock=function(node,blockElements){return node&&node.nodeName in blockElements},isEmpty=function(dom,elm,keepBookmarks){var empty=dom.isEmpty(elm);return!(keepBookmarks&&dom.select("span[data-mce-type=bookmark]",elm).length>0)&&empty},isChildOfBody=function(dom,elm){return dom.isChildOf(elm,dom.getRoot())},createTextBlock=function(editor,contentNode){var node,textBlock,hasContentNode,dom=editor.dom,blockElements=editor.schema.getBlockElements(),fragment=dom.createFragment(),blockName=function(editor){var block=editor.getParam("forced_root_block","p");return!1===block?"":!0===block?"p":block}(editor);if(blockName&&((textBlock=dom.create(blockName)).tagName===blockName.toUpperCase()&&dom.setAttribs(textBlock,function(editor){return editor.getParam("forced_root_block_attrs",{})}(editor)),isBlock(contentNode.firstChild,blockElements)||fragment.appendChild(textBlock)),contentNode)for(;node=contentNode.firstChild;){var nodeName=node.nodeName;hasContentNode||"SPAN"===nodeName&&"bookmark"===node.getAttribute("data-mce-type")||(hasContentNode=!0),isBlock(node,blockElements)?(fragment.appendChild(node),textBlock=null):blockName?(textBlock||(textBlock=dom.create(blockName),fragment.appendChild(textBlock)),textBlock.appendChild(node)):fragment.appendChild(node)}return blockName?hasContentNode||textBlock.appendChild(dom.create("br",{"data-mce-bogus":"1"})):fragment.appendChild(dom.create("br")),fragment},DOM$2=global$3.DOM,isDescriptionDetail=isTag("dd"),isDescriptionTerm=isTag("dt"),outdentDlItem=function(editor,item){isDescriptionDetail(item)?mutate(item,"dt"):isDescriptionTerm(item)&&parent(item).each((function(dl){return function(editor,list,li){var bookmarks=DOM$2.select('span[data-mce-type="bookmark"]',list),newBlock=createTextBlock(editor,li),tmpRng=DOM$2.createRng();tmpRng.setStartAfter(li),tmpRng.setEndAfter(list);for(var targetNode,fragment=tmpRng.extractContents(),node=fragment.firstChild;node;node=node.firstChild)if("LI"===node.nodeName&&editor.dom.isEmpty(node)){DOM$2.remove(node);break}editor.dom.isEmpty(fragment)||DOM$2.insertAfter(fragment,list),DOM$2.insertAfter(newBlock,list),isEmpty(editor.dom,li.parentNode)&&(targetNode=li.parentNode,global$2.each(bookmarks,(function(node){targetNode.parentNode.insertBefore(node,li.parentNode)})),DOM$2.remove(targetNode)),DOM$2.remove(li),isEmpty(editor.dom,list)&&DOM$2.remove(list)}(editor,dl.dom,item.dom)}))},indentDlItem=function(item){isDescriptionTerm(item)&&mutate(item,"dd")},getNormalizedPoint=function(container,offset){if(isTextNode(container))return{container:container,offset:offset};var node=global$6.getNode(container,offset);return isTextNode(node)?{container:node,offset:offset>=container.childNodes.length?node.data.length:0}:node.previousSibling&&isTextNode(node.previousSibling)?{container:node.previousSibling,offset:node.previousSibling.data.length}:node.nextSibling&&isTextNode(node.nextSibling)?{container:node.nextSibling,offset:0}:{container:container,offset:offset}},normalizeRange=function(rng){var outRng=rng.cloneRange(),rangeStart=getNormalizedPoint(rng.startContainer,rng.startOffset);outRng.setStart(rangeStart.container,rangeStart.offset);var rangeEnd=getNormalizedPoint(rng.endContainer,rng.endOffset);return outRng.setEnd(rangeEnd.container,rangeEnd.offset),outRng},global$1=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),getParentList=function(editor,node){var selectionStart=node||editor.selection.getStart(!0);return editor.dom.getParent(selectionStart,"OL,UL,DL",getClosestListRootElm(editor,selectionStart))},getSelectedSubLists=function(editor){var parentList=getParentList(editor),selectedBlocks=editor.selection.getSelectedBlocks();return function(parentList,selectedBlocks){return parentList&&1===selectedBlocks.length&&selectedBlocks[0]===parentList}(parentList,selectedBlocks)?function(parentList){return filter$1(parentList.querySelectorAll("ol,ul,dl"),isListNode)}(parentList):filter$1(selectedBlocks,(function(elm){return isListNode(elm)&&parentList!==elm}))},getSelectedListItems=function(editor){var selectedBlocks=editor.selection.getSelectedBlocks();return filter$1(function(editor,elms){var listItemsElms=global$2.map(elms,(function(elm){return editor.dom.getParent(elm,"li,dd,dt",getClosestListRootElm(editor,elm))||elm}));return global$1.unique(listItemsElms)}(editor,selectedBlocks),isListItemNode)},getClosestListRootElm=function(editor,elm){var parentTableCell=editor.dom.getParents(elm,"TD,TH");return parentTableCell.length>0?parentTableCell[0]:editor.getBody()},findLastParentListNode=function(editor,elm){var parentLists=editor.dom.getParents(elm,"ol,ul",getClosestListRootElm(editor,elm));return last(parentLists)},getSelectedListRoots=function(editor){var selectedLists=function(editor){var firstList=findLastParentListNode(editor,editor.selection.getStart()),subsequentLists=filter$1(editor.selection.getSelectedBlocks(),isOlUlNode);return firstList.toArray().concat(subsequentLists)}(editor);return getUniqueListRoots(editor,selectedLists)},getUniqueListRoots=function(editor,lists){var listRoots=map(lists,(function(list){return findLastParentListNode(editor,list).getOr(list)}));return global$1.unique(listRoots)},is=function(lhs,rhs,comparator){return void 0===comparator&&(comparator=tripleEquals),lhs.exists((function(left){return comparator(left,rhs)}))},lift2=function(oa,ob,f){return oa.isSome()&&ob.isSome()?Optional.some(f(oa.getOrDie(),ob.getOrDie())):Optional.none()},fireListEvent=function(editor,action,element){return editor.fire("ListMutation",{action:action,element:element})},internalSet=function(dom,property,value){if(!isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);(function(dom){return void 0!==dom.style&&isFunction(dom.style.getPropertyValue)})(dom)&&dom.style.setProperty(property,value)},joinSegment=function(parent,child){append$1(parent.item,child.list)},createSegment=function(scope,listType){var segment={list:SugarElement.fromTag(listType,scope),item:SugarElement.fromTag("li",scope)};return append$1(segment.list,segment.item),segment},writeShallow=function(scope,cast,entry){var newCast=cast.slice(0,entry.depth);return last(newCast).each((function(segment){!function(segment,item){append$1(segment.list,item),segment.item=item}(segment,function(scope,attr,content){var item=SugarElement.fromTag("li",scope);return setAll(item,attr),append(item,content),item}(scope,entry.itemAttributes,entry.content)),function(segment,entry){name(segment.list)!==entry.listType&&(segment.list=mutate(segment.list,entry.listType)),setAll(segment.list,entry.listAttributes)}(segment,entry)})),newCast},writeDeep=function(scope,cast,entry){var tail,segments=function(scope,entry,size){for(var segments=[],i=0;i<size;i++)segments.push(createSegment(scope,entry.listType));return segments}(scope,entry,entry.depth-cast.length);return function(segments){for(var i=1;i<segments.length;i++)joinSegment(segments[i-1],segments[i])}(segments),function(segments,entry){for(var i=0;i<segments.length-1;i++)element=segments[i].item,property="list-style-type",value="none",dom=void 0,dom=element.dom,internalSet(dom,property,value);var element,property,value,dom;last(segments).each((function(segment){setAll(segment.list,entry.listAttributes),setAll(segment.item,entry.itemAttributes),append(segment.item,entry.content)}))}(segments,entry),tail=segments,lift2(last(cast),head(tail),joinSegment),cast.concat(segments)},isList=function(el){return is$1(el,"OL,UL")},hasFirstChildList=function(el){return firstChild(el).exists(isList)},isIndented=function(entry){return entry.depth>0},isSelected=function(entry){return entry.isSelected},cloneItemContent=function(li){var children$1=children(li),content=lastChild(li).exists(isList)?children$1.slice(0,-1):children$1;return map(content,deep)},normalizeEntries=function(entries){return each$1(entries,(function(entry,i){(function(entries,start){var depth=entries[start].depth,matches=function(entry){return entry.depth===depth&&!entry.dirty},until=function(entry){return entry.depth<depth};return findUntil(reverse(entries.slice(0,start)),matches,until).orThunk((function(){return findUntil(entries.slice(start+1),matches,until)}))})(entries,i).fold((function(){entry.dirty&&function(entry){entry.listAttributes=filter(entry.listAttributes,(function(_value,key){return"start"!==key}))}(entry)}),(function(matchingEntry){return source=matchingEntry,(target=entry).listType=source.listType,void(target.listAttributes=__assign({},source.listAttributes));var target,source}))})),entries},parseItem=function(depth,itemSelection,selectionState,item){return firstChild(item).filter(isList).fold((function(){itemSelection.each((function(selection){eq(selection.start,item)&&selectionState.set(!0)}));var currentItemEntry=function(li,depth,isSelected){return parent(li).filter(isElement).map((function(list){return{depth:depth,dirty:!1,isSelected:isSelected,content:cloneItemContent(li),itemAttributes:clone$1(li),listAttributes:clone$1(list),listType:name(list)}}))}(item,depth,selectionState.get());itemSelection.each((function(selection){eq(selection.end,item)&&selectionState.set(!1)}));var childListEntries=lastChild(item).filter(isList).map((function(list){return parseList(depth,itemSelection,selectionState,list)})).getOr([]);return currentItemEntry.toArray().concat(childListEntries)}),(function(list){return parseList(depth,itemSelection,selectionState,list)}))},parseList=function(depth,itemSelection,selectionState,list){return bind(children(list),(function(element){return(isList(element)?parseList:parseItem)(depth+1,itemSelection,selectionState,element)}))},outdentedComposer=function(editor,entries){var normalizedEntries=normalizeEntries(entries);return map(normalizedEntries,(function(entry){var elements,scope,fragment,content=(elements=entry.content,fragment=(scope||document).createDocumentFragment(),each$1(elements,(function(element){fragment.appendChild(element.dom)})),SugarElement.fromDom(fragment));return SugarElement.fromDom(createTextBlock(editor,content.dom))}))},indentedComposer=function(editor,entries){var normalizedEntries=normalizeEntries(entries);return function(scope,entries){var cast=foldl(entries,(function(cast,entry){return entry.depth>cast.length?writeDeep(scope,cast,entry):writeShallow(scope,cast,entry)}),[]);return head(cast).map((function(segment){return segment.list}))}(editor.contentDocument,normalizedEntries).toArray()},listIndentation=function(editor,lists,indentation){var entrySets=function(lists,itemSelection){var value,selectionState=(value=!1,{get:function(){return value},set:function(v){value=v}});return map(lists,(function(list){return{sourceList:list,entries:parseList(0,itemSelection,selectionState,list)}}))}(lists,function(editor){var selectedListItems=map(getSelectedListItems(editor),SugarElement.fromDom);return lift2(find$1(selectedListItems,not(hasFirstChildList)),find$1(reverse(selectedListItems),not(hasFirstChildList)),(function(start,end){return{start:start,end:end}}))}(editor));each$1(entrySets,(function(entrySet){!function(entries,indentation){each$1(filter$1(entries,isSelected),(function(entry){return function(indentation,entry){switch(indentation){case"Indent":entry.depth++;break;case"Outdent":entry.depth--;break;case"Flatten":entry.depth=0}entry.dirty=!0}(indentation,entry)}))}(entrySet.entries,indentation);var marker,composedLists=function(editor,entries){return bind(function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r}(entries,isIndented),(function(entries){return head(entries).exists(isIndented)?indentedComposer(editor,entries):outdentedComposer(editor,entries)}))}(editor,entrySet.entries);each$1(composedLists,(function(composedList){fireListEvent(editor,"Indent"===indentation?"IndentList":"OutdentList",composedList.dom)})),marker=entrySet.sourceList,each$1(composedLists,(function(x){before$1(marker,x)})),remove(entrySet.sourceList)}))},selectionIndentation=function(editor,indentation){var lists=map(getSelectedListRoots(editor),SugarElement.fromDom),dlItems=map(function(editor){return filter$1(getSelectedListItems(editor),isDlItemNode)}(editor),SugarElement.fromDom),isHandled=!1;if(lists.length||dlItems.length){var bookmark=editor.selection.getBookmark();listIndentation(editor,lists,indentation),function(editor,indentation,dlItems){each$1(dlItems,"Indent"===indentation?indentDlItem:function(item){return outdentDlItem(editor,item)})}(editor,indentation,dlItems),editor.selection.moveToBookmark(bookmark),editor.selection.setRng(normalizeRange(editor.selection.getRng())),editor.nodeChanged(),isHandled=!0}return isHandled},indentListSelection=function(editor){return selectionIndentation(editor,"Indent")},outdentListSelection=function(editor){return selectionIndentation(editor,"Outdent")},flattenListSelection=function(editor){return selectionIndentation(editor,"Flatten")},global=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),DOM$1=global$3.DOM,createBookmark=function(rng){var bookmark={},setupEndPoint=function(start){var container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"];if(1===container.nodeType){var offsetNode=DOM$1.create("span",{"data-mce-type":"bookmark"});container.hasChildNodes()?(offset=Math.min(offset,container.childNodes.length-1),start?container.insertBefore(offsetNode,container.childNodes[offset]):DOM$1.insertAfter(offsetNode,container.childNodes[offset])):container.appendChild(offsetNode),container=offsetNode,offset=0}bookmark[start?"startContainer":"endContainer"]=container,bookmark[start?"startOffset":"endOffset"]=offset};return setupEndPoint(!0),rng.collapsed||setupEndPoint(),bookmark},resolveBookmark=function(bookmark){var restoreEndPoint=function(start){var node,container=node=bookmark[start?"startContainer":"endContainer"],offset=bookmark[start?"startOffset":"endOffset"];container&&(1===container.nodeType&&(offset=function(container){for(var node=container.parentNode.firstChild,idx=0;node;){if(node===container)return idx;1===node.nodeType&&"bookmark"===node.getAttribute("data-mce-type")||idx++,node=node.nextSibling}return-1}(container),container=container.parentNode,DOM$1.remove(node),!container.hasChildNodes()&&DOM$1.isBlock(container)&&container.appendChild(DOM$1.create("br"))),bookmark[start?"startContainer":"endContainer"]=container,bookmark[start?"startOffset":"endOffset"]=offset)};restoreEndPoint(!0),restoreEndPoint();var rng=DOM$1.createRng();return rng.setStart(bookmark.startContainer,bookmark.startOffset),bookmark.endContainer&&rng.setEnd(bookmark.endContainer,bookmark.endOffset),normalizeRange(rng)},listToggleActionFromListName=function(listName){switch(listName){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},isCustomList=function(list){return/\btox\-/.test(list.className)},listState=function(editor,listName,activate){var nodeChangeHandler=function(e){var inList=findUntil(e.parents,isListNode,isTableCellNode).filter((function(list){return list.nodeName===listName&&!isCustomList(list)})).isSome();activate(inList)},parents=editor.dom.getParents(editor.selection.getNode());return nodeChangeHandler({parents:parents}),editor.on("NodeChange",nodeChangeHandler),function(){return editor.off("NodeChange",nodeChangeHandler)}},setAttribs=function(elm,attrs){global$2.each(attrs,(function(value,key){elm.setAttribute(key,value)}))},updateListWithDetails=function(dom,el,detail){!function(dom,el,detail){var type=detail["list-style-type"]?detail["list-style-type"]:null;dom.setStyle(el,"list-style-type",type)}(dom,el,detail),function(dom,el,detail){setAttribs(el,detail["list-attributes"]),global$2.each(dom.select("li",el),(function(li){setAttribs(li,detail["list-item-attributes"])}))}(dom,el,detail)},getEndPointNode=function(editor,rng,start,root){var container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"];for(1===container.nodeType&&(container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container),!start&&isBr(container.nextSibling)&&(container=container.nextSibling);container.parentNode!==root;){if(isTextBlock(editor,container))return container;if(/^(TD|TH)$/.test(container.parentNode.nodeName))return container;container=container.parentNode}return container},applyList=function(editor,listName,detail){var rng=editor.selection.getRng(),listItemName="LI",root=getClosestListRootElm(editor,editor.selection.getStart(!0)),dom=editor.dom;if("false"!==dom.getContentEditable(editor.selection.getNode())){"DL"===(listName=listName.toUpperCase())&&(listItemName="DT");var bookmark=createBookmark(rng),selectedTextBlocks=function(editor,rng,root){for(var block,textBlocks=[],dom=editor.dom,startNode=getEndPointNode(editor,rng,!0,root),endNode=getEndPointNode(editor,rng,!1,root),siblings=[],node=startNode;node&&(siblings.push(node),node!==endNode);node=node.nextSibling);return global$2.each(siblings,(function(node){if(isTextBlock(editor,node))return textBlocks.push(node),void(block=null);if(dom.isBlock(node)||isBr(node))return isBr(node)&&dom.remove(node),void(block=null);var nextSibling=node.nextSibling;global.isBookmarkNode(node)&&(isListNode(nextSibling)||isTextBlock(editor,nextSibling)||!nextSibling&&node.parentNode===root)?block=null:(block||(block=dom.create("p"),node.parentNode.insertBefore(block,node),textBlocks.push(block)),block.appendChild(node))})),textBlocks}(editor,rng,root);global$2.each(selectedTextBlocks,(function(block){var listBlock,sibling=block.previousSibling,parent=block.parentNode;isListItemNode(parent)||(sibling&&isListNode(sibling)&&sibling.nodeName===listName&&function(dom,sib,detail){var sibStyle=dom.getStyle(sib,"list-style-type"),detailStyle=detail?detail["list-style-type"]:"";return sibStyle===(null===detailStyle?"":detailStyle)}(dom,sibling,detail)?(listBlock=sibling,block=dom.rename(block,listItemName),sibling.appendChild(block)):(listBlock=dom.create(listName),block.parentNode.insertBefore(listBlock,block),listBlock.appendChild(block),block=dom.rename(block,listItemName)),function(dom,element,styles){global$2.each(styles,(function(style){var _a;return dom.setStyle(element,((_a={})[style]="",_a))}))}(dom,block,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),updateListWithDetails(dom,listBlock,detail),mergeWithAdjacentLists(editor.dom,listBlock))})),editor.selection.setRng(resolveBookmark(bookmark))}},shouldMerge=function(dom,list1,list2){return function(list1,list2){return list1&&list2&&isListNode(list1)&&list1.nodeName===list2.nodeName}(list1,list2)&&function(dom,list1,list2){return dom.getStyle(list1,"list-style-type",!0)===dom.getStyle(list2,"list-style-type",!0)}(dom,list1,list2)&&(elm2=list2,list1.className===elm2.className);var elm2},mergeWithAdjacentLists=function(dom,listBlock){var sibling,node;if(sibling=listBlock.nextSibling,shouldMerge(dom,listBlock,sibling)){for(;node=sibling.firstChild;)listBlock.appendChild(node);dom.remove(sibling)}if(sibling=listBlock.previousSibling,shouldMerge(dom,listBlock,sibling)){for(;node=sibling.lastChild;)listBlock.insertBefore(node,listBlock.firstChild);dom.remove(sibling)}},toggleMultipleLists=function(editor,parentList,lists,listName,detail){var parentIsList=isListNode(parentList);if(parentIsList&&parentList.nodeName===listName&&!hasListStyleDetail(detail))flattenListSelection(editor);else{applyList(editor,listName,detail);var bookmark=createBookmark(editor.selection.getRng()),allLists=parentIsList?function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}([parentList],lists,!0):lists;global$2.each(allLists,(function(elm){!function(editor,list,listName,detail){if(list.nodeName!==listName){var newList=editor.dom.rename(list,listName);updateListWithDetails(editor.dom,newList,detail),fireListEvent(editor,listToggleActionFromListName(listName),newList)}else updateListWithDetails(editor.dom,list,detail),fireListEvent(editor,listToggleActionFromListName(listName),list)}(editor,elm,listName,detail)})),editor.selection.setRng(resolveBookmark(bookmark))}},hasListStyleDetail=function(detail){return"list-style-type"in detail},toggleList=function(editor,listName,_detail){var parentList=getParentList(editor),selectedSubLists=getSelectedSubLists(editor),detail=isObject(_detail)?_detail:{};selectedSubLists.length>0?toggleMultipleLists(editor,parentList,selectedSubLists,listName,detail):function(editor,parentList,listName,detail){if(parentList!==editor.getBody())if(parentList)if(parentList.nodeName!==listName||hasListStyleDetail(detail)||isCustomList(parentList)){var bookmark=createBookmark(editor.selection.getRng());updateListWithDetails(editor.dom,parentList,detail);var newList=editor.dom.rename(parentList,listName);mergeWithAdjacentLists(editor.dom,newList),editor.selection.setRng(resolveBookmark(bookmark)),applyList(editor,listName,detail),fireListEvent(editor,listToggleActionFromListName(listName),newList)}else flattenListSelection(editor);else applyList(editor,listName,detail),fireListEvent(editor,listToggleActionFromListName(listName),parentList)}(editor,parentList,listName,detail)},DOM=global$3.DOM,normalizeLists=function(dom,element){var lists=global$2.grep(dom.select("ol,ul",element));global$2.each(lists,(function(list){!function(dom,list){var sibling,parentNode=list.parentNode;"LI"===parentNode.nodeName&&parentNode.firstChild===list&&((sibling=parentNode.previousSibling)&&"LI"===sibling.nodeName?(sibling.appendChild(list),isEmpty(dom,parentNode)&&DOM.remove(parentNode)):DOM.setStyle(parentNode,"listStyleType","none")),isListNode(parentNode)&&(sibling=parentNode.previousSibling)&&"LI"===sibling.nodeName&&sibling.appendChild(list)}(dom,list)}))},findNextCaretContainer=function(editor,rng,isForward,root){var node=rng.startContainer,offset=rng.startOffset;if(isTextNode(node)&&(isForward?offset<node.data.length:offset>0))return node;var nonEmptyBlocks=editor.schema.getNonEmptyElements();1===node.nodeType&&(node=global$6.getNode(node,offset));var walker=new global$5(node,root);for(isForward&&function(dom,node){return!!isBr(node)&&dom.isBlock(node.nextSibling)&&!isBr(node.previousSibling)}(editor.dom,node)&&walker.next();node=walker[isForward?"next":"prev2"]();){if("LI"===node.nodeName&&!node.hasChildNodes())return node;if(nonEmptyBlocks[node.nodeName])return node;if(isTextNode(node)&&node.data.length>0)return node}},hasOnlyOneBlockChild=function(dom,elm){var childNodes=elm.childNodes;return 1===childNodes.length&&!isListNode(childNodes[0])&&dom.isBlock(childNodes[0])},moveChildren=function(dom,fromElm,toElm){var node,targetElm=hasOnlyOneBlockChild(dom,toElm)?toElm.firstChild:toElm;if(function(dom,elm){hasOnlyOneBlockChild(dom,elm)&&dom.remove(elm.firstChild,!0)}(dom,fromElm),!isEmpty(dom,fromElm,!0))for(;node=fromElm.firstChild;)targetElm.appendChild(node)},mergeLiElements=function(dom,fromElm,toElm){var listNode,ul=fromElm.parentNode;if(isChildOfBody(dom,fromElm)&&isChildOfBody(dom,toElm)){isListNode(toElm.lastChild)&&(listNode=toElm.lastChild),ul===toElm.lastChild&&isBr(ul.previousSibling)&&dom.remove(ul.previousSibling);var node=toElm.lastChild;node&&isBr(node)&&fromElm.hasChildNodes()&&dom.remove(node),isEmpty(dom,toElm,!0)&&dom.$(toElm).empty(),moveChildren(dom,fromElm,toElm),listNode&&toElm.appendChild(listNode);var nestedLists=contains(SugarElement.fromDom(toElm),SugarElement.fromDom(fromElm))?dom.getParents(fromElm,isListNode,toElm):[];dom.remove(fromElm),each$1(nestedLists,(function(list){isEmpty(dom,list)&&list!==dom.getRoot()&&dom.remove(list)}))}},mergeForward=function(editor,rng,fromLi,toLi){var dom=editor.dom;if(dom.isEmpty(toLi))!function(editor,fromLi,toLi){editor.dom.$(toLi).empty(),mergeLiElements(editor.dom,fromLi,toLi),editor.selection.setCursorLocation(toLi,0)}(editor,fromLi,toLi);else{var bookmark=createBookmark(rng);mergeLiElements(dom,fromLi,toLi),editor.selection.setRng(resolveBookmark(bookmark))}},backspaceDeleteFromListToListCaret=function(editor,isForward){var dom=editor.dom,selection=editor.selection,selectionStartElm=selection.getStart(),root=getClosestListRootElm(editor,selectionStartElm),li=dom.getParent(selection.getStart(),"LI",root);if(li){var ul=li.parentNode;if(ul===editor.getBody()&&isEmpty(dom,ul))return!0;var rng_1=normalizeRange(selection.getRng()),otherLi_1=dom.getParent(findNextCaretContainer(editor,rng_1,isForward,root),"LI",root);if(otherLi_1&&otherLi_1!==li)return editor.undoManager.transact((function(){var node;isForward?mergeForward(editor,rng_1,otherLi_1,li):(node=li).parentNode.firstChild===node?outdentListSelection(editor):function(editor,rng,fromLi,toLi){var bookmark=createBookmark(rng);mergeLiElements(editor.dom,fromLi,toLi);var resolvedBookmark=resolveBookmark(bookmark);editor.selection.setRng(resolvedBookmark)}(editor,rng_1,li,otherLi_1)})),!0;if(!otherLi_1&&!isForward&&0===rng_1.startOffset&&0===rng_1.endOffset)return editor.undoManager.transact((function(){flattenListSelection(editor)})),!0}return!1},backspaceDeleteCaret=function(editor,isForward){return backspaceDeleteFromListToListCaret(editor,isForward)||function(editor,isForward){var dom=editor.dom,selectionStartElm=editor.selection.getStart(),root=getClosestListRootElm(editor,selectionStartElm),block=dom.getParent(selectionStartElm,dom.isBlock,root);if(block&&dom.isEmpty(block)){var rng=normalizeRange(editor.selection.getRng()),otherLi_2=dom.getParent(findNextCaretContainer(editor,rng,isForward,root),"LI",root);if(otherLi_2)return editor.undoManager.transact((function(){!function(dom,block,root){var parentBlock=dom.getParent(block.parentNode,dom.isBlock,root);dom.remove(block),parentBlock&&dom.isEmpty(parentBlock)&&dom.remove(parentBlock)}(dom,block,root),mergeWithAdjacentLists(dom,otherLi_2.parentNode),editor.selection.select(otherLi_2,!0),editor.selection.collapse(isForward)})),!0}return!1}(editor,isForward)},backspaceDelete=function(editor,isForward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,isForward):function(editor){var selectionStartElm=editor.selection.getStart(),root=getClosestListRootElm(editor,selectionStartElm);return!!(editor.dom.getParent(selectionStartElm,"LI,DT,DD",root)||getSelectedListItems(editor).length>0)&&(editor.undoManager.transact((function(){editor.execCommand("Delete"),normalizeLists(editor.dom,editor.getBody())})),!0)}(editor)},parseAlphabeticBase26=function(str){var chars=reverse(trim(str).split("")),values=map(chars,(function(char,i){var charValue=char.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,i)*charValue}));return foldl(values,(function(sum,v){return sum+v}),0)},composeAlphabeticBase26=function(value){if(--value<0)return"";var remainder=value%26,quotient=Math.floor(value/26);return composeAlphabeticBase26(quotient)+String.fromCharCode("A".charCodeAt(0)+remainder)},open=function(editor){var detail,start,currentList=getParentList(editor);isOlNode(currentList)&&editor.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(detail={start:editor.dom.getAttrib(currentList,"start","1"),listStyleType:Optional.some(editor.dom.getStyle(currentList,"list-style-type"))},start=parseInt(detail.start,10),is(detail.listStyleType,"upper-alpha")?composeAlphabeticBase26(start):is(detail.listStyleType,"lower-alpha")?composeAlphabeticBase26(start).toLowerCase():detail.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(api){(function(start){switch(function(start){return/^[0-9]+$/.test(start)?2:/^[A-Z]+$/.test(start)?0:function(str){return/^[a-z]+$/.test(str)}(start)?1:start.length>0?4:3}(start)){case 2:return Optional.some({listStyleType:Optional.none(),start:start});case 0:return Optional.some({listStyleType:Optional.some("upper-alpha"),start:parseAlphabeticBase26(start).toString()});case 1:return Optional.some({listStyleType:Optional.some("lower-alpha"),start:parseAlphabeticBase26(start).toString()});case 3:return Optional.some({listStyleType:Optional.none(),start:""});case 4:return Optional.none()}})(api.getData().start).each((function(detail){editor.execCommand("mceListUpdate",!1,{attrs:{start:"1"===detail.start?"":detail.start},styles:{"list-style-type":detail.listStyleType.getOr("")}})})),api.close()}})},queryListCommandState=function(editor,listName){return function(){var parentList=getParentList(editor);return parentList&&parentList.nodeName===listName}},registerDialog=function(editor){editor.addCommand("mceListProps",(function(){open(editor)}))},register$2=function(editor){editor.on("BeforeExecCommand",(function(e){var cmd=e.command.toLowerCase();"indent"===cmd?indentListSelection(editor):"outdent"===cmd&&outdentListSelection(editor)})),editor.addCommand("InsertUnorderedList",(function(ui,detail){toggleList(editor,"UL",detail)})),editor.addCommand("InsertOrderedList",(function(ui,detail){toggleList(editor,"OL",detail)})),editor.addCommand("InsertDefinitionList",(function(ui,detail){toggleList(editor,"DL",detail)})),editor.addCommand("RemoveList",(function(){flattenListSelection(editor)})),registerDialog(editor),editor.addCommand("mceListUpdate",(function(ui,detail){isObject(detail)&&function(editor,update){var parentList=getParentList(editor);editor.undoManager.transact((function(){isObject(update.styles)&&editor.dom.setStyles(parentList,update.styles),isObject(update.attrs)&&each(update.attrs,(function(v,k){return editor.dom.setAttrib(parentList,k,v)}))}))}(editor,detail)})),editor.addQueryStateHandler("InsertUnorderedList",queryListCommandState(editor,"UL")),editor.addQueryStateHandler("InsertOrderedList",queryListCommandState(editor,"OL")),editor.addQueryStateHandler("InsertDefinitionList",queryListCommandState(editor,"DL"))},setup=function(editor){(function(editor){return editor.getParam("lists_indent_on_tab",!0)})(editor)&&function(editor){editor.on("keydown",(function(e){e.keyCode!==global$4.TAB||global$4.metaKeyPressed(e)||editor.undoManager.transact((function(){(e.shiftKey?outdentListSelection(editor):indentListSelection(editor))&&e.preventDefault()}))}))}(editor),function(editor){editor.on("keydown",(function(e){e.keyCode===global$4.BACKSPACE?backspaceDelete(editor,!1)&&e.preventDefault():e.keyCode===global$4.DELETE&&backspaceDelete(editor,!0)&&e.preventDefault()}))}(editor)};!function Plugin(){global$7.add("lists",(function(editor){return!1===editor.hasPlugin("rtc",!0)?(setup(editor),register$2(editor)):registerDialog(editor),function(editor){var exec=function(command){return function(){return editor.execCommand(command)}};editor.hasPlugin("advlist")||(editor.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:exec("InsertOrderedList"),onSetup:function(api){return listState(editor,"OL",api.setActive)}}),editor.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:exec("InsertUnorderedList"),onSetup:function(api){return listState(editor,"UL",api.setActive)}}))}(editor),function(editor){var listProperties={text:"List properties...",icon:"ordered-list",onAction:function(){return editor.execCommand("mceListProps")},onSetup:function(api){return listState(editor,"OL",(function(active){return api.setDisabled(!active)}))}};editor.ui.registry.addMenuItem("listprops",listProperties),editor.ui.registry.addContextMenu("lists",{update:function(node){var parentList=getParentList(editor,node);return isOlNode(parentList)?["listprops"]:[]}})}(editor),function(editor){return{backspaceDelete:function(isForward){backspaceDelete(editor,isForward)}}}(editor)}))}()}();