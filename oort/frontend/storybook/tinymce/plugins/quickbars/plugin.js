!function(){"use strict";var t,call,id,global$3=tinymce.util.Tools.resolve("tinymce.PluginManager"),unique=0,insertBlob=function(editor,base64,blob){var prefix,time,blobCache=editor.editorUpload.blobCache,blobInfo=blobCache.create((prefix="mceu",time=(new Date).getTime(),prefix+"_"+Math.floor(1e9*Math.random())+ ++unique+String(time)),blob,base64);blobCache.add(blobInfo),editor.insertContent(editor.dom.createHTML("img",{src:blobInfo.blobUri()}))},global$2=tinymce.util.Tools.resolve("tinymce.util.Promise"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),global=tinymce.util.Tools.resolve("tinymce.util.Delay"),setupButtons=function(editor){editor.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){(function(editor){return new global$2((function(resolve){var fileInput=document.createElement("input");fileInput.type="file",fileInput.accept="image/*",fileInput.style.position="fixed",fileInput.style.left="0",fileInput.style.top="0",fileInput.style.opacity="0.001",document.body.appendChild(fileInput),fileInput.addEventListener("change",(function(e){resolve(Array.prototype.slice.call(e.target.files))}));var cancelHandler=function(e){var cleanup=function(){resolve([]),fileInput.parentNode.removeChild(fileInput)};global$1.os.isAndroid()&&"remove"!==e.type?global.setEditorTimeout(editor,cleanup,0):cleanup(),editor.off("focusin remove",cancelHandler)};editor.on("focusin remove",cancelHandler),fileInput.click()}))})(editor).then((function(files){if(files.length>0){var blob_1=files[0];(blob=blob_1,new global$2((function(resolve){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result.split(",")[1])},reader.readAsDataURL(blob)}))).then((function(base64){insertBlob(editor,base64,blob_1)}))}var blob}))}}),editor.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){!function(editor,cols,rows){editor.plugins.table?editor.plugins.table.insertTable(cols,rows):function(editor,cols,rows){editor.undoManager.transact((function(){editor.insertContent(function(cols,rows){var html='<table data-mce-id="mce" style="width: 100%">';html+="<tbody>";for(var y=0;y<rows;y++){html+="<tr>";for(var x=0;x<cols;x++)html+="<td><br></td>";html+="</tr>"}return(html+="</tbody>")+"</table>"}(cols,rows));var tableElm=function(editor){return editor.dom.select("*[data-mce-id]")[0]}(editor);tableElm.removeAttribute("data-mce-id");var cellElm=editor.dom.select("td,th",tableElm);editor.selection.setCursorLocation(cellElm[0],0)}))}(editor,cols,rows)}(editor,2,2)}})},isType=function(type){return function(value){return t=typeof(x=value),(null===x?"null":"object"===t&&(Array.prototype.isPrototypeOf(x)||x.constructor&&"Array"===x.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(x)||x.constructor&&"String"===x.constructor.name)?"string":t)===type;var x,t}},isSimpleType=function(type){return function(value){return typeof value===type}},isString=isType("string"),isObject=isType("object"),isArray=isType("array"),isBoolean=isSimpleType("boolean"),isUndefined=(t=void 0,function(a){return t===a}),isFunction=isSimpleType("function"),noop=function(){},constant=function(value){return function(){return value}},identity=function(x){return x},never=constant(!1),always=constant(!0),none=function(){return NONE},NONE={fold:function(n,_s){return n()},isSome:never,isNone:always,getOr:id=identity,getOrThunk:call=function(thunk){return thunk()},getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:function(){return none()},toArray:function(){return[]},toString:constant("none()")},some=function(a){var constant_a=constant(a),self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},each:function(f){f(a)},bind:bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Optional={some:some,none:none,from:function(value){return null==value?NONE:some(value)}};function ClosestOrAncestor(is,ancestor,scope,a,isRoot){return is(scope,a)?Optional.some(scope):isFunction(isRoot)&&isRoot(scope)?Optional.none():ancestor(scope,a,isRoot)}var fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:node}},SugarElement={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),new Error("HTML must have a single root node");return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(docElm,x,y){return Optional.from(docElm.dom.elementFromPoint(x,y)).map(fromDom)}},is=function(element,selector){var dom=element.dom;if(1!==dom.nodeType)return!1;var elem=dom;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var predicate,ancestor$1=function(scope,predicate,isRoot){for(var element=scope.dom,stop=isFunction(isRoot)?isRoot:never;element.parentNode;){element=element.parentNode;var el=SugarElement.fromDom(element);if(predicate(el))return Optional.some(el);if(stop(el))break}return Optional.none()},ancestor=function(scope,selector,isRoot){return ancestor$1(scope,(function(e){return is(e,selector)}),isRoot)},getToolbarItemsOr=(predicate=isString,function(editor,name,defaultValue){return function(value,predicate){if(predicate(value))return!0;throw new Error("Default value doesn't match requested type.")}(defaultValue,predicate),function(value,defaultValue){if(isArray(value)||isObject(value))throw new Error("expected a string but found: "+value);return isUndefined(value)?defaultValue:isBoolean(value)?!1===value?"":defaultValue:value}(editor.getParam(name,defaultValue),defaultValue)}),addToEditor$1=function(editor){var insertToolbarItems=function(editor){return getToolbarItemsOr(editor,"quickbars_insert_toolbar","quickimage quicktable")}(editor);insertToolbarItems.trim().length>0&&editor.ui.registry.addContextToolbar("quickblock",{predicate:function(node){var sugarNode=SugarElement.fromDom(node),textBlockElementsMap=editor.schema.getTextBlockElements(),isRoot=function(elem){return elem.dom===editor.getBody()};return function(scope,selector,isRoot){return ClosestOrAncestor((function(element,selector){return is(element,selector)}),ancestor,scope,selector,isRoot)}(sugarNode,"table",isRoot).fold((function(){return function(scope,predicate,isRoot){return ClosestOrAncestor((function(s,test){return test(s)}),ancestor$1,scope,predicate,isRoot)}(sugarNode,(function(elem){return elem.dom.nodeName.toLowerCase()in textBlockElementsMap&&editor.dom.isEmpty(elem.dom)}),isRoot).isSome()}),never)},items:insertToolbarItems,position:"line",scope:"editor"})},addToEditor=function(editor){var isImage=function(node){return"IMG"===node.nodeName||"FIGURE"===node.nodeName&&/image/i.test(node.className)},imageToolbarItems=function(editor){return getToolbarItemsOr(editor,"quickbars_image_toolbar","alignleft aligncenter alignright")}(editor);imageToolbarItems.trim().length>0&&editor.ui.registry.addContextToolbar("imageselection",{predicate:isImage,items:imageToolbarItems,position:"node"});var textToolbarItems=function(editor){return getToolbarItemsOr(editor,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")}(editor);textToolbarItems.trim().length>0&&editor.ui.registry.addContextToolbar("textselection",{predicate:function(node){return!isImage(node)&&!editor.selection.isCollapsed()&&function(node){return"false"!==editor.dom.getContentEditableParent(node)}(node)},items:textToolbarItems,position:"selection",scope:"editor"})};!function Plugin(){global$3.add("quickbars",(function(editor){setupButtons(editor),addToEditor$1(editor),addToEditor(editor)}))}()}();